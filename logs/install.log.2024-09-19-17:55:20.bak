++ pwd
+ ROOT=/users/kshxtij/work
+ '[' -z v6.11 ']'
+ echo v6.11
+ grep -qP 'v\d+\.\d+'
+ echo 'Valid kernel version detected: v6.11'
Valid kernel version detected: v6.11
+ echo 'Cloning latest commit on branch v6.11'
Cloning latest commit on branch v6.11
+ KERNEL_LOCATION=kernels/linux-v6.11
+ '[' '!' -d /users/kshxtij/work/llvm-project ']'
+ LLVM_LOCATION=llvm-project
+ echo 'Building LLVM'
Building LLVM
+ cd llvm-project
+ mkdir -p build
+ cd build
+ '[' '!' -d /users/kshxtij/work/llvm-project/prefix ']'
+ echo 'LLVM built and installed'
LLVM built and installed
+ echo 'Building Bitcode Dumping Tool'
Building Bitcode Dumping Tool
+ cd /users/kshxtij/work/IRDumper
+ DUMPER_LOCATION=/users/kshxtij/work/IRDumper/build
+ IRDUMPER=/users/kshxtij/work/IRDumper/build/lib/libDumper.so
+ cd /users/kshxtij/work
+ CLANG_BIN=/users/kshxtij/work/llvm-project/prefix/bin/clang
+ '[' -z defconfig ']'
+ '[' defconfig '!=' defconfig ']'
+ CONFIG_NAME=defconfig
+ echo 'Valid config name detected: defconfig'
Valid config name detected: defconfig
+ NEW_CMD='\n\nKBUILD_USERCFLAGS += -Wno-error -g -Xclang -no-opaque-pointers -Xclang -flegacy-pass-manager -Xclang -load -Xclang /users/kshxtij/work/IRDumper/build/lib/libDumper.so\nKBUILD_CFLAGS += -Wno-error -g -Xclang -no-opaque-pointers -Xclang -flegacy-pass-manager -Xclang -load -Xclang /users/kshxtij/work/IRDumper/build/lib/libDumper.so'
+ '[' '!' -f kernels/linux-v6.11/Makefile.bak ']'
+ echo -e '\n\nKBUILD_USERCFLAGS' += -Wno-error -g -Xclang -no-opaque-pointers -Xclang -flegacy-pass-manager -Xclang -load -Xclang '/users/kshxtij/work/IRDumper/build/lib/libDumper.so\nKBUILD_CFLAGS' += -Wno-error -g -Xclang -no-opaque-pointers -Xclang -flegacy-pass-manager -Xclang -load -Xclang /users/kshxtij/work/IRDumper/build/lib/libDumper.so
+ cat kernels/linux-v6.11/Makefile.bak kernels/linux-v6.11/IRDumper.cmd
+ cd kernels/linux-v6.11
+ echo 'Clearing old build'
Clearing old build
+ echo 'Kernel built with IR Dumper'
Kernel built with IR Dumper
+ cd /users/kshxtij/work
+ echo 'Restoring Makefile'
Restoring Makefile
+ cp kernels/linux-v6.11/Makefile.bak kernels/linux-v6.11/Makefile
+ rm kernels/linux-v6.11/Makefile.bak
++ find kernels/linux-v6.11 -name '*.bc'
++ wc -l
+ echo 24400 'LLVM bitcode files generated'
24400 LLVM bitcode files generated
+ echo Done
Done
